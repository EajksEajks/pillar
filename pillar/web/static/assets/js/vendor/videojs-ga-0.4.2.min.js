(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};videojs.registerPlugin("ga",function(t){var n,a,r,i,s,l,o,u,c,d,h,v,f,p,g,y,m,M,T,b,k;return null==t&&(t={}),n={},this.options()["data-setup"]&&(d=JSON.parse(this.options()["data-setup"])).ga&&(n=d.ga),a=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],o=t.eventsToTrack||n.eventsToTrack||a,f=t.percentsPlayedInterval||n.percentsPlayedInterval||10,s=t.eventCategory||n.eventCategory||"Video",l=t.eventLabel||n.eventLabel,t.debug=t.debug||!1,v=[],m=y=0,M=!1,c=function(){l||(l=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),e.call(o,"loadedmetadata")>=0&&T("loadedmetadata",!0)},b=function(){var t,n,a,r,i;for(t=Math.round(this.currentTime()),n=Math.round(this.duration()),r=Math.round(t/n*100),a=i=0;i<=99;a=i+=f)r>=a&&e.call(v,a)<0&&(e.call(o,"start")>=0&&0===a&&r>0?T("start",!0):e.call(o,"percentsPlayed")>=0&&0!==r&&T("percent played",!0,a),r>0&&v.push(a));e.call(o,"seek")>=0&&(m=y,y=t,Math.abs(m-y)>1&&(M=!0,T("seek start",!1,m),T("seek end",!1,y)))},r=function(){T("end",!0)},p=function(){var e;e=Math.round(this.currentTime()),T("play",!0,e),M=!1},h=function(){var e;(e=Math.round(this.currentTime()))===Math.round(this.duration())||M||T("pause",!1,e)},k=function(){var e;e=!0===this.muted()?0:this.volume(),T("volume change",!1,e)},g=function(){T("resize - "+this.width()+"*"+this.height(),!0)},i=function(){var e;e=Math.round(this.currentTime()),T("error",!0,e)},u=function(){var e;e=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?T("enter fullscreen",!1,e):T("exit fullscreen",!1,e)},T=function(e,n,a){window.ga?ga("send","event",{eventCategory:s,eventAction:e,eventLabel:l,eventValue:a,nonInteraction:n}):window._gaq?_gaq.push(["_trackEvent",s,e,l,a,n]):t.debug&&console.log("Google Analytics not detected")},this.ready(function(){if(this.on("loadedmetadata",c),this.on("timeupdate",b),e.call(o,"end")>=0&&this.on("ended",r),e.call(o,"play")>=0&&this.on("play",p),e.call(o,"pause")>=0&&this.on("pause",h),e.call(o,"volumeChange")>=0&&this.on("volumechange",k),e.call(o,"resize")>=0&&this.on("resize",g),e.call(o,"error")>=0&&this.on("error",i),e.call(o,"fullscreen")>=0)return this.on("fullscreenchange",u)}),{sendbeacon:T}})}).call(this);
